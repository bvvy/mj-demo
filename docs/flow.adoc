:toc: left
:sectnums:

= 流程和功能

== 登录注册 忘记密码

=== 账号密码

=== 手机登录

=== 第三方登录

== 联系

=== 新的朋友

. 进入新的朋友页面
. 输入手机号/..确认后调用 get  /v1/user/search. 没有提示没有
. 点击用户查看信息  调用 get /v2/user/{id} 包含由判断是不是好友,不是好友才能加 已经是好友就只是发消息之类的
. 如果不是好友 点击加为好友 调用 post /v1/friend/apply 申请
. 对方收到请求 调用  get /v1/friend/applications 申请列表
. 可以点接受   调用 post /v1/friend/confirm
. 删除申请 delete /v1/friend/application/{id}

=== 新的团队
进入新的团队页面有两个选项
创建团队 加入团队

. 创建团队
.. 填写表单 确认添加 post /v1/team
. 加入团队
.. 输入搜索团队 get /v1/team/search
.. 点击申请加入 填写申请表单  确认申请 post /v1/team/apply



=== 我的团队

. 我的团队 /v1/mine/groups
. 点击团队查看详情  /v1/team/{id}
. 详情里面有基本信息 邀请加入团队按钮 查看团队成员 发送消息

=== 我的好友

/v1/mine/friends

=== 二维码功能

TIP: todo

. 团队二维码 个人二维码



== 团队工作功能

=== 合作团队

. 申请合作 -> 输入名称搜索 -> 申请合作 post  /v1/team/cooperation/apply
. 确认合作 -> 合作申请列表 -> get  /v1/team/cooperation/applications
. 确认合作 ->post  /v1/team/cooperation/confirm
, 合作伙伴 -> get  /v1/team/cooperations
. 删除合作 delete  /v1/team/cooperation
. 修改 put  /v1/team/cooperation
. 删除合作申请  delete /v1/team/cooperation/application

=== 团队申请信息

. 获取到申请列表 /v1/team/applications
. 接受申请  -> 填写表单 -> 确认 /v1/team/confirm



=== 商品

|===
| 商品列表 |get  | /v1/team/{teamId}/products
| 添加商品 |post | /v1/product
| 修改 | put | /v1/product
| 删除  | delete | /v1/product
|===

=== 库存

|===
|入库|post | /v1/stock/in
|出库| post | /v1/stock/out
|===

=== 采购

== 聊天

=== 聊天记录

不仅查用户的聊天,还包括有工作通知 .
这是一张正在聊天记录表,每次有信息就加载一遍.

表字段包括
|===
| 聊天对象类型   | 未读数量 | 最后一次消息内容 | 最后消息时间 | 名字| 头像

| 例: user,team,remind | | ||||
|===

我提交了加入团队的申请,需要对方团队管理员的同意加入,
或者说是需要拥有管理申请这个功能的人
此时接收的对象是对方团队的管理员,如何确定对方是谁

首先确定功能，团队申请这个功能会有一个唯一编码,例如 group_join_apply.
通过编码获取有这个权限的人。(用户和功能的权限关系应该是 g1->u1->m1,g1->u2->m1)
就相当于通过g1 m1查 u1,u2
执行两次addChat -> addChat(u1,g1,'apply?',).addChat(u2,g1,)

其中涉及到的 新的元素有

. 菜单（id,name）(1,团队申请,x)
. squad (id,name) (1.管理员)
. group_role (gid,rid) (1,1) 职位/部门 类型
. group_pr_menu -> gid pid ptype  mid (1,1,squad,团队申请)
. group_role_user -> gid rid uid


